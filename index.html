<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>2048</title>

  <link href="style/main.css" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="meta/apple-touch-icon.png">
  <link rel="apple-touch-startup-image" href="meta/apple-touch-startup-image-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"> <!-- iPhone 5+ -->
  <link rel="apple-touch-startup-image" href="meta/apple-touch-startup-image-640x920.png"  media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)"> <!-- iPhone, retina -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, maximum-scale=1, user-scalable=no, minimal-ui">
</head>
<body>
  <div class="container">
    <div class="heading">
      <h1 class="title">2048</h1>
      <div class="scores-container">
        <div class="score-container">0</div>
        <div class="average-container">0</div>
        <div class="best-container">0</div>
      </div>
    </div>

    <div class="above-game">
      <p class="game-intro">Watch the AI learning to play <strong>2048!</strong></p>
      <a class="reset-button">Reset</a>
      <a class="stop-button">Pause</a>
      <a class="start-button" style="display: none;">Resume</a>
      <a class="restart-button" style="display: none;">New Game</a>
    </div>

    <div class="game-container">
      <div class="game-message">
        <p></p>
        <div class="lower">
	        <a class="keep-playing-button">Keep going</a>
          <a class="retry-button" style="display: none;">Try again</a>
        </div>
      </div>

      <div class="grid-container">
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
        <div class="grid-row">
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
          <div class="grid-cell"></div>
        </div>
      </div>

      <div class="tile-container">

      </div>
    </div>

    <p class="game-explanation">
      <strong class="important">Learning statistics:</strong> 
      <div class="info"></div>
    </p>
    <hr>
    <p>
    Average score shows the average of last 100 games. Initially the agent is making completely random moves ("exploration epsilon" is 1) and expected average score is around 1100. As the learning progresses, random exploration rate decreases and the agent starts using its network more and more. This should improve average score, but currently it doesn't. Quite the opposite, average score decreases instead! To help me to figure it out, take a look in <a href="https://github.com/tambetm/2048/blob/gh-pages/js/application.js">application.js</a>.
    </p>
    <hr>
    <p>
    You can refresh the page any time, learning continues from the point it left off. The network state is saved to browser's local storage after each game, so the best time to refresh is after a game has just finished. Refresh also clears experience replay memory, because it was too big to fit to browser's local storage. That's why after refresh it plays very fast, until "experience replay size" achieves 1000. Then it resumes learning, which also makes moves somewhat slower. Learning progress can be observed from "average Q-learning loss", which should decrease in time. "age" shows the total number of training passes the network has seen.
    </p>
    <hr>
    <p>
    If you want to restart learning from scratch, press the <strong>Reset</strong> button. Reset also clears the average score and the best score. You can also pause the game temporarily with <strong>Pause</strong> button, if the browser eats up all your computer resources, or if you want to explore the state of the network, or if you just want to give the AI little hand by merging few tiles yourself :). <strong>Resume</strong> continues learning again.
    </p>
    <hr>
    <p>
    Created by <a href="mailto:tambet.matiisen@gmail.com" target="_blank">Tambet Matiisen.</a> Based on <a href="http://gabrielecirulli.github.io/2048/" target="_blank">2048 by Gabriele Cirulli</a> and <a href="http://cs.stanford.edu/people/karpathy/convnetjs/" target="_blank">ConvNetJS by Andrej Karpathy.</a>
    </p>
  </div>

  <script src="js/bind_polyfill.js"></script>
  <script src="js/classlist_polyfill.js"></script>
  <script src="js/animframe_polyfill.js"></script>
  <script src="js/keyboard_input_manager.js"></script>
  <script src="js/html_actuator.js"></script>
  <script src="js/grid.js"></script>
  <script src="js/tile.js"></script>
  <script src="js/local_storage_manager.js"></script>
  <script src="js/game_manager.js"></script>
  <script src="convnetjs/convnet.js"></script>
  <script src="convnetjs/util.js"></script>
  <script src="convnetjs/deepqlearn.js"></script>
  <script src="js/application.js"></script>
</body>
</html>
